### FAIL: DAG with a circular dependency ###

# WORKFLOW SETTINGS
wham_settings:
  data_dir: "../states/data"
  metadata_dir: "../states/metadata"
  metadata_prefix: "wham_"
  metadata_add_depth: true
  metadata_depth_padding: 3
  metadata_suffix: ".state"
  shared_args: ["{{ if .Forced }}force{{ end }}"]

# WORKFLOW STEP SETTINGS
wham_steps:
  # 000 - step-a
  - name: "step-a"
    command: ["../../test/scripts/bash/stateless.sh"]
    args: []
    env_vars: {}
    can_fail: false
    is_stateful: false
    state_file: ""
    run_id_var: ""
    previous_steps:
    - "step-c" # <- This creates the cycle (C depends on B, which depends on A)
  # 001 - step-b
  - name: "step-b"
    command: ["../../test/scripts/bash/stateless.sh"]
    args: []
    env_vars: {}
    can_fail: false
    is_stateful: false
    state_file: ""
    run_id_var: ""
    previous_steps:
    - "step-a"
  # 002 - step-c
  - name: "step-c"
    command: ["../../test/scripts/bash/stateless.sh"]
    args: []
    env_vars: {}
    can_fail: false
    is_stateful: false
    state_file: ""
    run_id_var: ""
    previous_steps:
    - "step-b"
