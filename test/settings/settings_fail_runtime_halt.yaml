### FAIL: Runtime execution failure that halts the workflow ###

# WORKFLOW SETTINGS
wham_settings:
  data_dir: "../states/data"
  metadata_dir: "../states/metadata"
  metadata_prefix: "wham_"
  metadata_add_depth: true
  metadata_depth_padding: 3
  metadata_suffix: ".state"
  shared_args: ["{{ if .Forced }}force{{ end }}"]

# WORKFLOW STEP SETTINGS
wham_steps:
  # 000 - start_node: A simple starting point for the workflow.
  - name: "start_node"
    command: ["../../test/scripts/bash/stateless.sh"]
    args: []
    env_vars: {}
    can_fail: false
    is_stateful: false
    state_file: ""
    run_id_var: ""
    previous_steps: []
  # 001 - resilient_step_fails: This step will fail, but the workflow will continue because can_fail is true.
  - name: "resilient_step_fails"
    command: ["../../test/scripts/python/stateless.py"]
    args: []
    env_vars:
      EXIT_STATUS: "fail"
    can_fail: true
    is_stateful: false
    state_file: ""
    run_id_var: ""
    previous_steps:
    - "start_node"
  # 002 - critical_step_fails: This step depends on the previous one. It will also fail,
  # but because can_fail is false, it MUST halt the entire workflow.
  - name: "critical_step_fails"
    command: ["../../test/scripts/python/stateless.py"]
    args: []
    env_vars:
      EXIT_STATUS: "fail"
    can_fail: false
    is_stateful: false
    state_file: ""
    run_id_var: ""
    previous_steps:
    - "resilient_step_fails"
